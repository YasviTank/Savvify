<!DOCTYPE html>
<html>
<head>
    <title>Debt & Savings Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Debt & Savings Simulation</h1>

    <h2>Results</h2>
    <canvas id="chart" width="600" height="400"></canvas>

    <script>
        let chart;

        function runSimulation() {
            // Use default parameters in the backend
            fetch('/simulate')
                .then(response => response.json())
                .then(data => {
                    // Destroy previous chart if exists
                    if(chart) chart.destroy();

                    const ctx = document.getElementById('chart').getContext('2d');
                    chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: data.months,
                            datasets: [
                                {
                                    label: 'Savings',
                                    data: data.savings,
                                    borderColor: 'green',
                                    fill: false
                                },
                                {
                                    label: 'Debt',
                                    data: data.debt,
                                    borderColor: 'red',
                                    fill: false
                                },
                                {
                                    label: 'Monthly Payment',
                                    data: data.monthly_payments, 
                                    borderColor: 'blue',
                                    fill: false
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: { position: 'top' }
                            },
                            scales: {
                                y: { beginAtZero: true }
                            }
                        }
                    });
                })
                .catch(err => console.error(err));
        }

        // Run simulation immediately when page loads
        window.onload = function(){
            runSimulation();
            setInterval(runSimulation, 3000);
        };
    </script>
</body>
</html> 